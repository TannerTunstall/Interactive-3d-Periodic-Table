<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive 3D Periodic Table</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }
        
        .particle-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .floating-particle {
            position: absolute;
            border-radius: 50%;
            animation: float 20s infinite linear;
            opacity: 0.1;
        }
        
        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.1;
            }
            90% {
                opacity: 0.1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
        
        .glow-effect {
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
            transition: box-shadow 0.3s ease;
        }
        
        .glow-effect:hover {
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.8);
        }
        
        .glass-effect {
            backdrop-filter: blur(16px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .element-glow {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .element-glow::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .element-glow:hover::before {
            left: 100%;
        }
        
        .slide-in {
            animation: slideIn 0.6s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .fade-in {
            animation: fadeIn 0.4s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .pulse-glow {
            animation: pulseGlow 2s ease-in-out infinite alternate;
        }
        
        @keyframes pulseGlow {
            from {
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
            }
            to {
                box-shadow: 0 0 40px rgba(59, 130, 246, 0.8);
            }
        }
        
        /* Responsive grid adjustments */
        @media (max-width: 1200px) {
            .periodic-grid {
                font-size: 0.8rem;
            }
        }
        
        @media (max-width: 768px) {
            .periodic-grid {
                font-size: 0.6rem;
                gap: 1px;
            }
            .modal-content {
                grid-template-columns: 1fr !important;
            }
        }
        
        @media (max-width: 480px) {
            .periodic-grid {
                font-size: 0.5rem;
                gap: 0.5px;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const InteractivePeriodicTable = () => {
            const [elements, setElements] = useState([]);
            const [selectedElement, setSelectedElement] = useState(null);
            const [loading, setLoading] = useState(true);
            const [show3D, setShow3D] = useState(false);
            const [particleEffects, setParticleEffects] = useState(true);
            const [performanceMode, setPerformanceMode] = useState(false);
            const [searchTerm, setSearchTerm] = useState('');
            const [filteredElements, setFilteredElements] = useState([]);
            const mountRef = useRef(null);
            const sceneRef = useRef(null);
            const rendererRef = useRef(null);
            const animationRef = useRef(null);
            const particleContainerRef = useRef(null);

            // Load and parse CSV data
            useEffect(() => {
                const loadElements = async () => {
                    try {
                        const response = await fetch('Periodic Table of Elements.csv');
                        const csvData = await response.text();
                        
                        const lines = csvData.trim().split('\n');
                        const headers = lines[0].split(',');
                        
                        const parsedElements = lines.slice(1).map(line => {
                            const values = line.split(',');
                            const element = {};
                            headers.forEach((header, index) => {
                                const value = values[index]?.trim();
                                element[header] = isNaN(value) ? value : parseFloat(value);
                            });
                            return element;
                        });
                        
                        setElements(parsedElements);
                        setFilteredElements(parsedElements);
                        setLoading(false);
                    } catch (error) {
                        console.error('Error loading elements:', error);
                        alert('Error loading CSV file. Make sure "Periodic Table of Elements.csv" is in the same folder as this HTML file.');
                        setLoading(false);
                    }
                };
                
                loadElements();
            }, []);

            // Search functionality
            useEffect(() => {
                if (searchTerm) {
                    const filtered = elements.filter(element =>
                        element.Element.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        element.Symbol.toLowerCase().includes(searchTerm.toLowerCase()) ||
                        element.AtomicNumber.toString().includes(searchTerm)
                    );
                    setFilteredElements(filtered);
                } else {
                    setFilteredElements(elements);
                }
            }, [searchTerm, elements]);

            // Particle effects
            useEffect(() => {
                if (!particleEffects || !particleContainerRef.current) return;

                const createParticle = () => {
                    const particle = document.createElement('div');
                    particle.className = 'floating-particle';
                    
                    const size = Math.random() * 6 + 2;
                    const colors = ['#3b82f6', '#8b5cf6', '#06d6a0', '#f72585', '#ffbe0b'];
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                    particle.style.backgroundColor = color;
                    particle.style.left = `${Math.random() * 100}%`;
                    particle.style.animationDelay = `${Math.random() * 20}s`;
                    particle.style.animationDuration = `${15 + Math.random() * 10}s`;
                    
                    particleContainerRef.current.appendChild(particle);
                    
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                    }, 25000);
                };

                const interval = setInterval(createParticle, performanceMode ? 2000 : 500);
                
                return () => clearInterval(interval);
            }, [particleEffects, performanceMode]);

            // Get element color based on type - matching reference periodic table
            const getElementColor = (element) => {
                const colors = {
                    'Alkali Metal': '#22d3ee',           // Cyan - like Li, Na, K
                    'Alkaline Earth Metal': '#f87171',   // Red/pink - like Be, Mg, Ca
                    'Transition Metal': '#a855f7',       // Purple - like Sc, Ti, V, etc.
                    'Post-transition Metal': '#34d399',  // Green - like Al, Ga, In
                    'Lanthanide': '#e879f9',            // Magenta/pink - lanthanide series
                    'Actinide': '#fb923c',              // Orange - actinide series
                    'Noble Gas': '#f472b6',             // Pink/magenta - like He, Ne, Ar
                    'Halogen': '#60a5fa',               // Blue - like F, Cl, Br
                    'Reactive Nonmetal': '#3b82f6',     // Blue - like C, N, O
                    'Metalloid': '#fbbf24',             // Yellow - like B, Si
                    'Nonmetal': '#3b82f6',              // Blue for general nonmetals
                    'Metal': '#34d399',                 // Green for general metals
                    'Unknown': '#9ca3af'                // Gray for unknown properties
                };

                // Super heavy elements with unknown chemical properties (109-118)
                if (element.AtomicNumber >= 109 && element.AtomicNumber <= 118) {
                    return colors['Unknown'];
                }

                // More specific classification based on element properties
                if (element.Type === 'Alkali Metal') return colors['Alkali Metal'];
                if (element.Type === 'Alkaline Earth Metal') return colors['Alkaline Earth Metal'];
                if (element.Type === 'Transition Metal') return colors['Transition Metal'];
                if (element.Type === 'Lanthanide') return colors['Lanthanide'];
                if (element.Type === 'Actinide') return colors['Actinide'];
                if (element.Type === 'Noble Gas') return colors['Noble Gas'];
                if (element.Type === 'Halogen') return colors['Halogen'];
                
                // Post-transition metals (Al, Ga, In, Sn, Tl, Pb, Bi)
                if (['Al', 'Ga', 'In', 'Sn', 'Tl', 'Pb', 'Bi'].includes(element.Symbol)) {
                    return colors['Post-transition Metal'];
                }
                
                // Metalloids (B, Si, Ge, As, Sb, Te, Po)
                if (['B', 'Si', 'Ge', 'As', 'Sb', 'Te', 'Po'].includes(element.Symbol)) {
                    return colors['Metalloid'];
                }
                
                // Reactive nonmetals (H, C, N, O, P, S, Se)
                if (['H', 'C', 'N', 'O', 'P', 'S', 'Se'].includes(element.Symbol)) {
                    return colors['Reactive Nonmetal'];
                }
                
                // Fallback logic
                if (element.Metalloid === 'yes') return colors['Metalloid'];
                if (element.Nonmetal === 'yes') return colors['Reactive Nonmetal'];
                if (element.Metal === 'yes') return colors['Metal'];
                
                return colors['Unknown'];
            };

            // Improved nucleus packing algorithm - ultra-dense like real nuclei
            const createNucleusCluster = (numProtons, numNeutrons, scene, nucleusRadius, performanceMode) => {
                const nucleonRadius = 0.15; // Slightly larger nucleons
                const packingDensity = 0.95; // Much tighter packing - almost touching
                const totalNucleons = numProtons + numNeutrons;
                
                // Make nucleus radius smaller to force much tighter packing
                const actualNucleusRadius = nucleusRadius * 0.6;
                
                // Create arrays to hold nucleons
                const nucleons = [];
                
                // Create protons
                const protonGeometry = new THREE.SphereGeometry(nucleonRadius, performanceMode ? 8 : 12, performanceMode ? 8 : 12);
                const protonMaterial = new THREE.MeshPhongMaterial({ 
                    color: 0xff3333,
                    shininess: 80,
                    emissive: 0x441111
                });
                
                // Create neutrons
                const neutronMaterial = new THREE.MeshPhongMaterial({ 
                    color: 0xaaaaaa,
                    shininess: 80,
                    emissive: 0x333333
                });
                
                // Generate tightly packed positions using close sphere packing
                const positions = [];
                const maxAttempts = 2000;
                
                for (let i = 0; i < totalNucleons; i++) {
                    let validPosition = false;
                    let attempts = 0;
                    let newPosition;
                    
                    while (!validPosition && attempts < maxAttempts) {
                        // Generate position within much smaller nucleus radius
                        const radius = Math.random() * actualNucleusRadius * 0.9;
                        const theta = Math.random() * Math.PI * 2;
                        const phi = Math.acos(2 * Math.random() - 1);
                        
                        newPosition = new THREE.Vector3(
                            radius * Math.sin(phi) * Math.cos(theta),
                            radius * Math.sin(phi) * Math.sin(theta),
                            radius * Math.cos(phi)
                        );
                        
                        // Much smaller minimum distance - nucleons almost touching
                        validPosition = true;
                        const minDistance = nucleonRadius * 1.8 * packingDensity; // Much closer
                        
                        for (let j = 0; j < positions.length; j++) {
                            if (newPosition.distanceTo(positions[j]) < minDistance) {
                                validPosition = false;
                                break;
                            }
                        }
                        
                        attempts++;
                    }
                    
                    // If we couldn't find a valid position, force it closer to center
                    if (!validPosition) {
                        const fallbackRadius = actualNucleusRadius * (0.3 + 0.4 * Math.random());
                        const theta = (i / totalNucleons) * Math.PI * 2 + Math.random() * 0.5;
                        const phi = Math.acos(2 * Math.random() - 1);
                        
                        newPosition = new THREE.Vector3(
                            fallbackRadius * Math.sin(phi) * Math.cos(theta),
                            fallbackRadius * Math.sin(phi) * Math.sin(theta),
                            fallbackRadius * Math.cos(phi)
                        );
                    }
                    
                    positions.push(newPosition);
                }
                
                // Randomly mix protons and neutrons
                const nucleonTypes = [];
                for (let i = 0; i < numProtons; i++) nucleonTypes.push('proton');
                for (let i = 0; i < numNeutrons; i++) nucleonTypes.push('neutron');
                
                // Shuffle the array to mix protons and neutrons
                for (let i = nucleonTypes.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [nucleonTypes[i], nucleonTypes[j]] = [nucleonTypes[j], nucleonTypes[i]];
                }
                
                // Create nucleon meshes at the calculated positions
                const nucleusGroup = new THREE.Group();
                
                for (let i = 0; i < totalNucleons && i < positions.length; i++) {
                    const isProton = nucleonTypes[i] === 'proton';
                    const nucleon = new THREE.Mesh(
                        protonGeometry, 
                        isProton ? protonMaterial : neutronMaterial
                    );
                    
                    nucleon.position.copy(positions[i]);
                    nucleon.castShadow = !performanceMode;
                    nucleusGroup.add(nucleon);
                }
                
                return nucleusGroup;
            };

            // Create 3D atomic model
            const create3DModel = (element) => {
                if (!mountRef.current) return;

                // Clean up previous scene
                if (rendererRef.current) {
                    if (animationRef.current) {
                        cancelAnimationFrame(animationRef.current);
                        animationRef.current = null;
                    }
                    
                    if (mountRef.current.contains(rendererRef.current.domElement)) {
                        mountRef.current.removeChild(rendererRef.current.domElement);
                    }
                    rendererRef.current.dispose();
                    rendererRef.current = null;
                }

                if (sceneRef.current) {
                    sceneRef.current.traverse((child) => {
                        if (child.geometry) child.geometry.dispose();
                        if (child.material) {
                            if (Array.isArray(child.material)) {
                                child.material.forEach(material => material.dispose());
                            } else {
                                child.material.dispose();
                            }
                        }
                    });
                    sceneRef.current = null;
                }

                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, 400 / 300, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({ antialias: !performanceMode, alpha: true });
                
                renderer.setSize(400, 300);
                renderer.setClearColor(0x000000, 0);
                renderer.shadowMap.enabled = !performanceMode;
                renderer.shadowMap.type = THREE.PCFSoftShadowMap;
                mountRef.current.appendChild(renderer.domElement);
                
                rendererRef.current = renderer;
                sceneRef.current = scene;

                // Enhanced mouse controls
                let isDragging = false;
                let previousMousePosition = { x: 0, y: 0 };
                let cameraDistance = 12;
                let cameraTheta = 0;
                let cameraPhi = 0.1; // Start in top-down view

                const updateCameraPosition = () => {
                    camera.position.x = cameraDistance * Math.sin(cameraPhi) * Math.cos(cameraTheta);
                    camera.position.y = cameraDistance * Math.cos(cameraPhi);
                    camera.position.z = cameraDistance * Math.sin(cameraPhi) * Math.sin(cameraTheta);
                    camera.lookAt(0, 0, 0);
                };

                renderer.domElement.addEventListener('mousedown', (e) => {
                    isDragging = true;
                    previousMousePosition = { x: e.clientX, y: e.clientY };
                });

                renderer.domElement.addEventListener('mousemove', (e) => {
                    if (isDragging) {
                        const deltaMove = {
                            x: e.clientX - previousMousePosition.x,
                            y: e.clientY - previousMousePosition.y
                        };

                        cameraTheta += deltaMove.x * 0.01;
                        cameraPhi += deltaMove.y * 0.01;
                        
                        cameraPhi = Math.max(0.1, Math.min(Math.PI - 0.1, cameraPhi));
                        
                        updateCameraPosition();
                        previousMousePosition = { x: e.clientX, y: e.clientY };
                    }
                });

                renderer.domElement.addEventListener('mouseup', () => {
                    isDragging = false;
                });

                renderer.domElement.addEventListener('wheel', (e) => {
                    e.preventDefault();
                    cameraDistance += e.deltaY * 0.01;
                    cameraDistance = Math.max(5, Math.min(50, cameraDistance));
                    updateCameraPosition();
                });

                // Set initial camera position
                updateCameraPosition();

                // Calculate nucleus radius based on number of nucleons (smaller for realistic density)
                const totalNucleons = element.NumberofProtons + element.NumberofNeutrons;
                const nucleusRadius = Math.max(0.6, Math.pow(totalNucleons, 1/3) * 0.2);

                // Create nucleus background sphere (much smaller and more transparent)
                const actualNucleusRadius = nucleusRadius * 0.6; // Match the tighter packing
                const nucleusGeometry = new THREE.SphereGeometry(actualNucleusRadius, performanceMode ? 16 : 32, performanceMode ? 16 : 32);
                const nucleusMaterial = new THREE.MeshPhongMaterial({ 
                    color: 0x441133,
                    transparent: true,
                    opacity: 0.08, // More transparent to show the dense nucleon packing
                    shininess: 100,
                    emissive: 0x330022
                });
                const nucleusSphere = new THREE.Mesh(nucleusGeometry, nucleusMaterial);
                scene.add(nucleusSphere);

                // Create the clustered nucleus using improved algorithm
                const nucleusGroup = createNucleusCluster(
                    performanceMode ? Math.min(element.NumberofProtons, 60) : element.NumberofProtons,
                    performanceMode ? Math.min(element.NumberofNeutrons, 60) : element.NumberofNeutrons,
                    scene,
                    nucleusRadius,
                    performanceMode
                );
                
                scene.add(nucleusGroup);

                // Create electron shells
                const shells = element.NumberofShells || 1;
                const electronsPerShell = [2, 8, 18, 32, 32, 18, 8];
                let remainingElectrons = element.NumberofElectrons;

                for (let shell = 0; shell < shells && remainingElectrons > 0; shell++) {
                    const shellRadius = actualNucleusRadius + 4 + shell * 2.5; // Start from the smaller nucleus
                    const electronsInShell = Math.min(remainingElectrons, electronsPerShell[shell]);
                    
                    // Create orbit path
                    const orbitGeometry = new THREE.RingGeometry(shellRadius - 0.05, shellRadius + 0.05, performanceMode ? 32 : 64);
                    const orbitMaterial = new THREE.MeshBasicMaterial({
                        color: 0x444444,
                        transparent: true,
                        opacity: 0.2,
                        side: THREE.DoubleSide
                    });
                    const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
                    orbit.rotation.x = Math.PI / 2;
                    scene.add(orbit);

                    // Add electrons
                    const electronGeometry = new THREE.SphereGeometry(0.1, performanceMode ? 6 : 8, performanceMode ? 6 : 8);
                    const electronMaterial = new THREE.MeshPhongMaterial({ 
                        color: 0x00ff44,
                        emissive: 0x002211,
                        shininess: 100
                    });

                    for (let e = 0; e < electronsInShell; e++) {
                        const electron = new THREE.Mesh(electronGeometry, electronMaterial);
                        const angle = (e / electronsInShell) * Math.PI * 2;
                        
                        electron.position.x = shellRadius * Math.cos(angle);
                        electron.position.z = shellRadius * Math.sin(angle);
                        electron.position.y = 0;
                        
                        electron.userData = { 
                            shell, 
                            angle: angle, 
                            radius: shellRadius,
                            speed: 0.02 / (shell + 1)
                        };
                        
                        scene.add(electron);
                    }
                    
                    remainingElectrons -= electronsInShell;
                }

                // Enhanced lighting system
                const ambientLight = new THREE.AmbientLight(0x404040, 0.4);
                scene.add(ambientLight);
                
                const directionalLight1 = new THREE.DirectionalLight(0xffffff, 0.6);
                directionalLight1.position.set(10, 10, 10);
                directionalLight1.castShadow = !performanceMode;
                scene.add(directionalLight1);
                
                const directionalLight2 = new THREE.DirectionalLight(0xffffff, 0.3);
                directionalLight2.position.set(-10, -10, -10);
                scene.add(directionalLight2);

                if (!performanceMode) {
                    const pointLight = new THREE.PointLight(0x3b82f6, 0.5, 100);
                    pointLight.position.set(0, 0, 0);
                    scene.add(pointLight);
                }

                // Animation loop
                const animate = () => {
                    if (!rendererRef.current) return;
                    
                    animationRef.current = requestAnimationFrame(animate);
                    
                    // Rotate the nucleus group slowly
                    nucleusGroup.rotation.y += 0.005;
                    nucleusGroup.rotation.x += 0.003;
                    
                    // Animate electrons
                    scene.children.forEach(child => {
                        if (child.userData && child.userData.shell !== undefined) {
                            child.userData.angle += child.userData.speed;
                            child.position.x = child.userData.radius * Math.cos(child.userData.angle);
                            child.position.z = child.userData.radius * Math.sin(child.userData.angle);
                        }
                    });
                    
                    renderer.render(scene, camera);
                };

                animate();
            };

            // Get element position in periodic table
            const getElementPosition = (element) => {
                const period = element.Period;
                let group = element.Group;
                
                // Don't place lanthanides (58-71) and actinides (90-103) in main grid
                // Only La (57) and Ac (89) go in the main grid
                if (element.Type === 'Lanthanide' && element.AtomicNumber !== 57) {
                    return null; // Don't place in main grid
                }
                if (element.Type === 'Actinide' && element.AtomicNumber !== 89) {
                    return null; // Don't place in main grid
                }
                
                return { row: period, col: group };
            };

            const handleElementClick = (element) => {
                setSelectedElement(element);
                setShow3D(true);
                setTimeout(() => create3DModel(element), 100);
            };

            const isElementFiltered = (element) => {
                return filteredElements.includes(element);
            };

            if (loading) {
                return React.createElement('div', {
                    className: "flex items-center justify-center min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900"
                }, [
                    React.createElement('div', {
                        key: 'loading-spinner',
                        className: "pulse-glow rounded-full p-8 glass-effect"
                    }, React.createElement('div', {
                        className: "text-white text-xl font-medium"
                    }, "Loading Periodic Table...")),
                ]);
            }

            const createPeriodicGrid = () => {
                const grid = Array(10).fill().map(() => Array(18).fill(null));
                
                elements.forEach(element => {
                    const pos = getElementPosition(element);
                    if (pos && pos.row >= 1 && pos.row <= 9 && pos.col >= 1 && pos.col <= 18) {
                        grid[pos.row - 1][pos.col - 1] = element;
                    }
                });
                
                return grid;
            };

            const periodicGrid = createPeriodicGrid();
            const lanthanides = elements.filter(e => e.Type === 'Lanthanide');
            const actinides = elements.filter(e => e.Type === 'Actinide');

            return React.createElement('div', {
                className: "min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 text-white relative"
            }, [
                // Particle background
                particleEffects && React.createElement('div', {
                    key: 'particle-bg',
                    ref: particleContainerRef,
                    className: "particle-bg"
                }),

                React.createElement('div', {
                    key: 'main-content',
                    className: "relative z-10 p-4 max-w-7xl mx-auto"
                }, [
                    // Header with controls
                    React.createElement('div', {
                        key: 'header',
                        className: "slide-in mb-8"
                    }, [
                        React.createElement('h1', {
                            key: 'title',
                            className: "text-4xl md:text-6xl font-bold text-center mb-6 bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 bg-clip-text text-transparent"
                        }, "Interactive 3D Periodic Table"),

                        // Controls panel
                        React.createElement('div', {
                            key: 'controls',
                            className: "flex flex-wrap gap-4 justify-center items-center mb-6 glass-effect rounded-lg p-4"
                        }, [
                            // Search bar
                            React.createElement('input', {
                                key: 'search',
                                type: 'text',
                                placeholder: 'Search elements...',
                                value: searchTerm,
                                onChange: (e) => setSearchTerm(e.target.value),
                                className: "px-4 py-2 rounded-lg bg-gray-800 border border-gray-600 text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none"
                            }),

                            // Performance toggle
                            React.createElement('label', {
                                key: 'performance-label',
                                className: "flex items-center space-x-2 cursor-pointer"
                            }, [
                                React.createElement('input', {
                                    key: 'performance-checkbox',
                                    type: 'checkbox',
                                    checked: performanceMode,
                                    onChange: (e) => setPerformanceMode(e.target.checked),
                                    className: "rounded"
                                }),
                                React.createElement('span', {
                                    key: 'performance-text',
                                    className: "text-sm"
                                }, "Performance Mode")
                            ]),

                            // Particle effects toggle
                            React.createElement('label', {
                                key: 'particles-label',
                                className: "flex items-center space-x-2 cursor-pointer"
                            }, [
                                React.createElement('input', {
                                    key: 'particles-checkbox',
                                    type: 'checkbox',
                                    checked: particleEffects,
                                    onChange: (e) => setParticleEffects(e.target.checked),
                                    className: "rounded"
                                }),
                                React.createElement('span', {
                                    key: 'particles-text',
                                    className: "text-sm"
                                }, "Particle Effects")
                            ])
                        ])
                    ]),
                    
                    // Main periodic table
                    React.createElement('div', {
                        key: 'main-grid',
                        className: "periodic-grid grid gap-1 mb-8 fade-in",
                        style: { gridTemplateColumns: 'repeat(18, 1fr)' }
                    }, periodicGrid.map((row, rowIndex) =>
                        row.map((element, colIndex) =>
                            React.createElement('div', {
                                key: `${rowIndex}-${colIndex}`,
                                className: `aspect-square border border-gray-600 rounded-lg transition-all duration-300 cursor-pointer element-glow ${
                                    element ? 'hover:scale-110 hover:z-10' : ''
                                } ${element && !isElementFiltered(element) ? 'opacity-30' : ''}`,
                                style: {
                                    backgroundColor: element ? getElementColor(element) : 'transparent',
                                    opacity: element ? (isElementFiltered(element) ? 0.9 : 0.3) : 0.05,
                                    boxShadow: element && isElementFiltered(element) ? `0 0 15px ${getElementColor(element)}40` : 'none'
                                },
                                onClick: () => element && isElementFiltered(element) && handleElementClick(element)
                            }, element && React.createElement('div', {
                                className: "h-full flex flex-col justify-center items-center text-center p-1"
                            }, [
                                React.createElement('div', { key: 'atomic-num', className: "text-xs font-bold" }, element.AtomicNumber),
                                React.createElement('div', { key: 'symbol', className: "text-sm md:text-lg font-bold" }, element.Symbol),
                                React.createElement('div', { key: 'name', className: "text-xs truncate w-full hidden md:block" }, element.Element)
                            ]))
                        )
                    ).flat()),
                    
                    // Lanthanides and Actinides - separated from main table
                    React.createElement('div', {
                        key: 'special-series',
                        className: "mt-12 space-y-6 fade-in"
                    }, [
                        // Visual separator
                        React.createElement('div', {
                            key: 'separator',
                            className: "flex items-center justify-center mb-6"
                        }, React.createElement('div', {
                            className: "glass-effect rounded-lg px-4 py-2 text-sm text-gray-400"
                        }, "Lanthanides and Actinides")),
                        
                        // Lanthanides row
                        React.createElement('div', {
                            key: 'lanthanides-container',
                            className: "space-y-2"
                        }, [
                            React.createElement('div', {
                                key: 'lanthanides-label',
                                className: "text-sm text-gray-400 pl-2"
                            }, "Lanthanides (57-71)"),
                            React.createElement('div', {
                                key: 'lanthanides',
                                className: "grid gap-1",
                                style: { gridTemplateColumns: 'repeat(15, 1fr)' }
                            }, lanthanides.map(element =>
                                React.createElement('div', {
                                    key: element.AtomicNumber,
                                    className: `aspect-square border border-gray-600 rounded-lg transition-all duration-300 cursor-pointer element-glow hover:scale-110 ${
                                        !isElementFiltered(element) ? 'opacity-30' : ''
                                    }`,
                                    style: { 
                                        backgroundColor: getElementColor(element), 
                                        opacity: isElementFiltered(element) ? 0.9 : 0.3,
                                        boxShadow: isElementFiltered(element) ? `0 0 15px ${getElementColor(element)}40` : 'none'
                                    },
                                    onClick: () => isElementFiltered(element) && handleElementClick(element)
                                }, React.createElement('div', {
                                    className: "h-full flex flex-col justify-center items-center text-center p-1"
                                }, [
                                    React.createElement('div', { key: 'atomic-num', className: "text-xs font-bold" }, element.AtomicNumber),
                                    React.createElement('div', { key: 'symbol', className: "text-sm font-bold" }, element.Symbol),
                                    React.createElement('div', { key: 'name', className: "text-xs truncate w-full hidden sm:block" }, element.Element)
                                ]))
                            ))
                        ]),
                        
                        // Actinides row
                        React.createElement('div', {
                            key: 'actinides-container',
                            className: "space-y-2"
                        }, [
                            React.createElement('div', {
                                key: 'actinides-label',
                                className: "text-sm text-gray-400 pl-2"
                            }, "Actinides (89-103)"),
                            React.createElement('div', {
                                key: 'actinides',
                                className: "grid gap-1",
                                style: { gridTemplateColumns: 'repeat(15, 1fr)' }
                            }, actinides.map(element =>
                                React.createElement('div', {
                                    key: element.AtomicNumber,
                                    className: `aspect-square border border-gray-600 rounded-lg transition-all duration-300 cursor-pointer element-glow hover:scale-110 ${
                                        !isElementFiltered(element) ? 'opacity-30' : ''
                                    }`,
                                    style: { 
                                        backgroundColor: getElementColor(element), 
                                        opacity: isElementFiltered(element) ? 0.9 : 0.3,
                                        boxShadow: isElementFiltered(element) ? `0 0 15px ${getElementColor(element)}40` : 'none'
                                    },
                                    onClick: () => isElementFiltered(element) && handleElementClick(element)
                                }, React.createElement('div', {
                                    className: "h-full flex flex-col justify-center items-center text-center p-1"
                                }, [
                                    React.createElement('div', { key: 'atomic-num', className: "text-xs font-bold" }, element.AtomicNumber),
                                    React.createElement('div', { key: 'symbol', className: "text-sm font-bold" }, element.Symbol),
                                    React.createElement('div', { key: 'name', className: "text-xs truncate w-full hidden sm:block" }, element.Element)
                                ]))
                            ))
                        ])
                    ]),
                    
                    // Element legend
                    React.createElement('div', {
                        key: 'legend',
                        className: "glass-effect rounded-lg p-4 mb-8 fade-in"
                    }, [
                        React.createElement('h3', {
                            key: 'legend-title',
                            className: "text-lg font-semibold mb-3 text-center"
                        }, "Element Types"),
                        React.createElement('div', {
                            key: 'legend-grid',
                            className: "grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 text-sm"
                        }, [
                            React.createElement('div', { key: 'alkali', className: "flex items-center space-x-2" }, [
                                React.createElement('div', { className: "w-4 h-4 rounded", style: { backgroundColor: '#22d3ee' } }),
                                React.createElement('span', {}, "Alkali Metal")
                            ]),
                            React.createElement('div', { key: 'alkaline', className: "flex items-center space-x-2" }, [
                                React.createElement('div', { className: "w-4 h-4 rounded", style: { backgroundColor: '#f87171' } }),
                                React.createElement('span', {}, "Alkaline Earth Metal")
                            ]),
                            React.createElement('div', { key: 'transition', className: "flex items-center space-x-2" }, [
                                React.createElement('div', { className: "w-4 h-4 rounded", style: { backgroundColor: '#a855f7' } }),
                                React.createElement('span', {}, "Transition Metal")
                            ]),
                            React.createElement('div', { key: 'post-transition', className: "flex items-center space-x-2" }, [
                                React.createElement('div', { className: "w-4 h-4 rounded", style: { backgroundColor: '#34d399' } }),
                                React.createElement('span', {}, "Post-transition Metal")
                            ]),
                            React.createElement('div', { key: 'metalloid', className: "flex items-center space-x-2" }, [
                                React.createElement('div', { className: "w-4 h-4 rounded", style: { backgroundColor: '#fbbf24' } }),
                                React.createElement('span', {}, "Metalloid")
                            ]),
                            React.createElement('div', { key: 'reactive-nonmetal', className: "flex items-center space-x-2" }, [
                                React.createElement('div', { className: "w-4 h-4 rounded", style: { backgroundColor: '#3b82f6' } }),
                                React.createElement('span', {}, "Reactive Nonmetal")
                            ]),
                            React.createElement('div', { key: 'halogen', className: "flex items-center space-x-2" }, [
                                React.createElement('div', { className: "w-4 h-4 rounded", style: { backgroundColor: '#60a5fa' } }),
                                React.createElement('span', {}, "Halogen")
                            ]),
                            React.createElement('div', { key: 'noble', className: "flex items-center space-x-2" }, [
                                React.createElement('div', { className: "w-4 h-4 rounded", style: { backgroundColor: '#f472b6' } }),
                                React.createElement('span', {}, "Noble Gas")
                            ]),
                            React.createElement('div', { key: 'lanthanide', className: "flex items-center space-x-2" }, [
                                React.createElement('div', { className: "w-4 h-4 rounded", style: { backgroundColor: '#e879f9' } }),
                                React.createElement('span', {}, "Lanthanide")
                            ]),
                            React.createElement('div', { key: 'actinide', className: "flex items-center space-x-2" }, [
                                React.createElement('div', { className: "w-4 h-4 rounded", style: { backgroundColor: '#fb923c' } }),
                                React.createElement('span', {}, "Actinide")
                            ]),
                            React.createElement('div', { key: 'unknown', className: "flex items-center space-x-2" }, [
                                React.createElement('div', { className: "w-4 h-4 rounded", style: { backgroundColor: '#9ca3af' } }),
                                React.createElement('span', {}, "Unknown Properties")
                            ])
                        ])
                    ]),
                    
                    // Modal
                    selectedElement && React.createElement('div', {
                        key: 'modal',
                        className: "fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4 fade-in",
                        onClick: (e) => {
                            if (e.target === e.currentTarget) {
                                setSelectedElement(null);
                                setShow3D(false);
                            }
                        }
                    }, React.createElement('div', {
                        className: "glass-effect rounded-xl p-6 max-w-6xl w-full max-h-[90vh] overflow-y-auto glow-effect",
                        onClick: (e) => e.stopPropagation()
                    }, [
                        React.createElement('div', {
                            key: 'modal-header',
                            className: "flex justify-between items-center mb-6"
                        }, [
                            React.createElement('div', {
                                key: 'element-info',
                                className: "flex items-center space-x-4"
                            }, [
                                React.createElement('div', {
                                    key: 'element-icon',
                                    className: "w-16 h-16 rounded-lg flex items-center justify-center text-2xl font-bold",
                                    style: { backgroundColor: getElementColor(selectedElement) }
                                }, selectedElement.Symbol),
                                React.createElement('div', { key: 'element-details' }, [
                                    React.createElement('h2', {
                                        key: 'element-name',
                                        className: "text-2xl md:text-3xl font-bold"
                                    }, selectedElement.Element),
                                    React.createElement('p', {
                                        key: 'element-type',
                                        className: "text-lg text-gray-300"
                                    }, `${selectedElement.Type} • Atomic #${selectedElement.AtomicNumber}`)
                                ])
                            ]),
                            React.createElement('button', {
                                key: 'close-btn',
                                onClick: () => {
                                    setSelectedElement(null);
                                    setShow3D(false);
                                    if (rendererRef.current) {
                                        if (animationRef.current) {
                                            cancelAnimationFrame(animationRef.current);
                                            animationRef.current = null;
                                        }
                                        if (mountRef.current && mountRef.current.contains(rendererRef.current.domElement)) {
                                            mountRef.current.removeChild(rendererRef.current.domElement);
                                        }
                                        rendererRef.current.dispose();
                                        rendererRef.current = null;
                                    }
                                    if (sceneRef.current) {
                                        sceneRef.current.traverse((child) => {
                                            if (child.geometry) child.geometry.dispose();
                                            if (child.material) {
                                                if (Array.isArray(child.material)) {
                                                    child.material.forEach(material => material.dispose());
                                                } else {
                                                    child.material.dispose();
                                                }
                                            }
                                        });
                                        sceneRef.current = null;
                                    }
                                },
                                className: "text-white hover:text-red-400 text-3xl transition-colors duration-200 hover:scale-110"
                            }, "×")
                        ]),
                        
                        React.createElement('div', {
                            key: 'modal-content',
                            className: "modal-content grid grid-cols-1 lg:grid-cols-2 gap-8"
                        }, [
                            React.createElement('div', { key: '3d-section', className: "space-y-4" }, [
                                React.createElement('h3', {
                                    key: '3d-title',
                                    className: "text-xl font-semibold"
                                }, "3D Atomic Model"),
                                React.createElement('div', {
                                    key: '3d-container',
                                    ref: mountRef,
                                    className: "w-full h-80 bg-gray-900 rounded-lg border-2 border-gray-600 relative glow-effect"
                                }),
                                React.createElement('div', {
                                    key: '3d-legend',
                                    className: "glass-effect rounded-lg p-3"
                                }, React.createElement('div', {
                                    className: "flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-2 sm:space-y-0"
                                }, [
                                    React.createElement('div', { key: 'particle-info', className: "flex flex-wrap gap-4 text-sm" }, [
                                        React.createElement('div', { key: 'protons', className: "flex items-center space-x-1" }, [
                                            React.createElement('span', { className: "w-3 h-3 rounded-full bg-red-400" }),
                                            React.createElement('span', {}, `Protons: ${selectedElement.NumberofProtons}`)
                                        ]),
                                        React.createElement('div', { key: 'neutrons', className: "flex items-center space-x-1" }, [
                                            React.createElement('span', { className: "w-3 h-3 rounded-full bg-gray-400" }),
                                            React.createElement('span', {}, `Neutrons: ${selectedElement.NumberofNeutrons}`)
                                        ]),
                                        React.createElement('div', { key: 'electrons', className: "flex items-center space-x-1" }, [
                                            React.createElement('span', { className: "w-3 h-3 rounded-full bg-green-400" }),
                                            React.createElement('span', {}, `Electrons: ${selectedElement.NumberofElectrons}`)
                                        ])
                                    ]),
                                    React.createElement('div', {
                                        key: 'controls-info',
                                        className: "text-xs text-gray-400"
                                    }, "🖱️ Drag to rotate • 🔄 Scroll to zoom")
                                ]))
                            ]),
                            
                            React.createElement('div', { key: 'properties-section', className: "space-y-4" }, [
                                React.createElement('h3', {
                                    key: 'properties-title',
                                    className: "text-xl font-semibold"
                                }, "Element Properties"),
                                React.createElement('div', {
                                    key: 'properties-grid',
                                    className: "grid grid-cols-1 sm:grid-cols-2 gap-4"
                                }, [
                                    React.createElement('div', { key: 'basic-props', className: "glass-effect rounded-lg p-4 space-y-2 text-sm" }, [
                                        React.createElement('h4', { key: 'basic-title', className: "font-semibold text-blue-400 mb-3" }, "Basic Properties"),
                                        React.createElement('div', { key: 'atomic-mass' }, [React.createElement('strong', {}, "Atomic Mass: "), `${selectedElement.AtomicMass} u`]),
                                        React.createElement('div', { key: 'period' }, [React.createElement('strong', {}, "Period: "), selectedElement.Period]),
                                        React.createElement('div', { key: 'group' }, [React.createElement('strong', {}, "Group: "), selectedElement.Group || 'N/A']),
                                        React.createElement('div', { key: 'phase' }, [React.createElement('strong', {}, "Phase: "), selectedElement.Phase]),
                                        React.createElement('div', { key: 'shells' }, [React.createElement('strong', {}, "Electron Shells: "), selectedElement.NumberofShells]),
                                        React.createElement('div', { key: 'valence' }, [React.createElement('strong', {}, "Valence Electrons: "), selectedElement.NumberofValence || 'N/A'])
                                    ]),
                                    
                                    React.createElement('div', { key: 'physical-props', className: "glass-effect rounded-lg p-4 space-y-2 text-sm" }, [
                                        React.createElement('h4', { key: 'physical-title', className: "font-semibold text-green-400 mb-3" }, "Physical Properties"),
                                        selectedElement.Density && React.createElement('div', { key: 'density' }, [React.createElement('strong', {}, "Density: "), `${selectedElement.Density} g/cm³`]),
                                        selectedElement.MeltingPoint && React.createElement('div', { key: 'melting' }, [React.createElement('strong', {}, "Melting Point: "), `${selectedElement.MeltingPoint} K`]),
                                        selectedElement.BoilingPoint && React.createElement('div', { key: 'boiling' }, [React.createElement('strong', {}, "Boiling Point: "), `${selectedElement.BoilingPoint} K`]),
                                        selectedElement.Electronegativity && React.createElement('div', { key: 'electronegativity' }, [React.createElement('strong', {}, "Electronegativity: "), selectedElement.Electronegativity]),
                                        selectedElement.AtomicRadius && React.createElement('div', { key: 'radius' }, [React.createElement('strong', {}, "Atomic Radius: "), `${selectedElement.AtomicRadius} Å`]),
                                        React.createElement('div', { key: 'radioactive' }, [React.createElement('strong', {}, "Radioactive: "), selectedElement.Radioactive === 'yes' ? 'Yes' : 'No']),
                                        React.createElement('div', { key: 'natural' }, [React.createElement('strong', {}, "Natural: "), selectedElement.Natural === 'yes' ? 'Yes' : 'No'])
                                    ]),
                                    
                                    React.createElement('div', { key: 'discovery-props', className: "glass-effect rounded-lg p-4 space-y-2 text-sm sm:col-span-2" }, [
                                        React.createElement('h4', { key: 'discovery-title', className: "font-semibold text-purple-400 mb-3" }, "Discovery Information"),
                                        selectedElement.Discoverer && React.createElement('div', { key: 'discoverer' }, [React.createElement('strong', {}, "Discovered by: "), selectedElement.Discoverer]),
                                        selectedElement.Year && React.createElement('div', { key: 'year' }, [React.createElement('strong', {}, "Year discovered: "), selectedElement.Year]),
                                        selectedElement.NumberOfIsotopes && React.createElement('div', { key: 'isotopes' }, [React.createElement('strong', {}, "Number of Isotopes: "), selectedElement.NumberOfIsotopes]),
                                        selectedElement.SpecificHeat && React.createElement('div', { key: 'specific-heat' }, [React.createElement('strong', {}, "Specific Heat: "), `${selectedElement.SpecificHeat} J/(g·K)`])
                                    ])
                                ])
                            ])
                        ])
                    ]))
                ]),

                // Footer attribution
                React.createElement('footer', {
                    key: 'footer',
                    className: "fixed bottom-4 right-4 text-xs text-gray-400 glass-effect rounded-lg px-3 py-2 z-20 pointer-events-none"
                }, [
                    React.createElement('div', { key: 'attribution' }, "Developed by Tanner Tunstall"),
                    React.createElement('div', { key: 'collaboration' }, "with help from Anthropic's Claude Sonnet 4")
                ])
            ]);
        };

        ReactDOM.render(React.createElement(InteractivePeriodicTable), document.getElementById('root'));
    </script>
</body>
</html>